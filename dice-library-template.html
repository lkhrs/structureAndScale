<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Dice Library</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<style type="text/css">
			body {
				margin: 0 auto;
				max-width: 40em;
				width: 88%;
			}
		</style>
	</head>

	<body>
		<h1>Dice Library</h1>

		<p>All of the magic here happens in the console.</p>

		<script>
			let roll = (function () {
				/**
				 * Randomly shuffle an array
				 * https://stackoverflow.com/a/2450976/1293256
				 * @param  {Array} array The array to shuffle
				 * @return {Array}       The shuffled array
				 */
				function shuffle(array) {
					let currentIndex = array.length;
					let temporaryValue, randomIndex;

					// While there remain elements to shuffle...
					while (0 !== currentIndex) {
						// Pick a remaining element...
						randomIndex = Math.floor(Math.random() * currentIndex);
						currentIndex -= 1;

						// And swap it with the current element.
						temporaryValue = array[currentIndex];
						array[currentIndex] = array[randomIndex];
						array[randomIndex] = temporaryValue;
					}

					return array;
				}

				// helper to generate dice
				function dice(d) {
					return [...Array(d).keys()].slice(1);
				}

				// helper to shuffle and log result
				function roll(array) {
					shuffle(array);
					let result = array[0];
					console.log(result);
				}

				// roll the dice
				function d4() {
					let d4 = dice(4);
					roll(d4);
				}

				function d6() {
					let d6 = dice(6);
					roll(d6);
				}

				function d10() {
					let d10 = dice(10);
					roll(d10);
				}

				function d20() {
					let d20 = dice(20);
					roll(d20);
				}

				// return the functions
				return { d4, d6, d10, d20 };
			})();
		</script>
	</body>
</html>
